import{r as p,c as P,F as K,j as d,T as M}from"./index.f2b2141e.js";import"./1071856f.js";import"./d170438b.js";import"./7542601b.js";import"./5fb3ed56.js";import{u as Y,S as ee}from"./944d37a2.js";import{BaseButton as te}from"./5154d50d.js";import{M as W}from"./a0281b8f.js";import"./8af873eb.js";import{u as re}from"./492dd489.js";import{P as oe}from"./1716977d.js";import"./e51f79a2.js";import"./84e93da1.js";import{B as ne}from"./6fc1a161.js";import{t as L,s as ie,a as k,y as $,o as w,u as D,L as ae,C as se,p as B,h as le,b as ue,g as ce,_ as A,d as E,e as Q,x as Z,f as de,i as pe,j as z,S as fe,k as be,l as g,r as xe,v as me,H as ve,T as H,m as he,n as ge}from"./5089d9cc.js";import"./650abe93.js";/* empty css        */import{s as ye}from"./19c7d718.js";import"./e6d90f68.js";import"./646bb2f9.js";import"./b040299e.js";import"./a77cbaf9.js";import"./1986dff3.js";import"./5e87fb4b.js";function Oe(){return typeof document!="undefined"}function U(){const e=p.exports.useContext(oe);if(!e)throw new Error("'useProductOptions' must be a child of <ProductOptionsProvider/>");return e}function Se(e){var l;const[o,r]=p.exports.useState(!1),{variantId:t,quantity:n=1,attributes:i,onClick:s,children:a,accessibleAddingToCartLabel:u,...v}=e,{status:y,linesAdd:h}=Y(),{selectedVariant:b}=U(),c=(l=t!=null?t:b==null?void 0:b.id)!=null?l:"",f=t===null||c===""||b===null||o||v.disabled;p.exports.useEffect(()=>{o&&y==="idle"&&r(!1)},[y,o]);const x=p.exports.useCallback(()=>{r(!0),h([{quantity:n,merchandiseId:c,attributes:i}])},[h,n,c,i]);return P(K,{children:[d(te,{...v,disabled:f,onClick:s,defaultOnClick:x,children:a}),u?d("p",{style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},role:"alert","aria-live":"assertive",children:o?u:null}):null]})}function _(e,o){let[r,t]=p.exports.useState(e),n=ie(e);return L(()=>t(n.current),[n,t,...o]),r}function Re(e){throw new Error("Unexpected object: "+e)}var I=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(I||{});function we(e,o){let r=o.resolveItems();if(r.length<=0)return null;let t=o.resolveActiveIndex(),n=t!=null?t:-1,i=(()=>{switch(e.focus){case 0:return r.findIndex(s=>!o.resolveDisabled(s));case 1:{let s=r.slice().reverse().findIndex((a,u,v)=>n!==-1&&v.length-u-1>=n?!1:!o.resolveDisabled(a));return s===-1?s:r.length-1-s}case 2:return r.findIndex((s,a)=>a<=n?!1:!o.resolveDisabled(s));case 3:{let s=r.slice().reverse().findIndex(a=>!o.resolveDisabled(a));return s===-1?s:r.length-1-s}case 4:return r.findIndex(s=>o.resolveId(s)===e.id);case 5:return null;default:Re(e)}})();return i===-1?t:i}function J(e={},o=null,r=[]){for(let[t,n]of Object.entries(e))X(r,V(o,t),n);return r}function V(e,o){return e?e+"["+o+"]":o}function X(e,o,r){if(Array.isArray(r))for(let[t,n]of r.entries())X(e,V(o,t.toString()),n);else r instanceof Date?e.push([o,r.toISOString()]):typeof r=="boolean"?e.push([o,r?"1":"0"]):typeof r=="string"?e.push([o,r]):typeof r=="number"?e.push([o,`${r}`]):r==null?e.push([o,""]):J(r,o,e)}var Ie=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ie||{}),Ce=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ce||{}),Le=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Le||{}),Pe=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption",e))(Pe||{});function j(e,o=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=me(o(e.options.slice()),i=>i.dataRef.current.domRef.current),n=r?t.indexOf(r):null;return n===-1&&(n=null),{options:t,activeOptionIndex:n}}let De={[1](e){return e.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.disabled||e.listboxState===0)return e;let o=e.activeOptionIndex,{value:r,mode:t,compare:n}=e.propsRef.current,i=e.options.findIndex(s=>{let a=s.dataRef.current.value;return D(t,{[1]:()=>r.some(u=>n(u,a)),[0]:()=>n(r,a)})});return i!==-1&&(o=i),{...e,listboxState:0,activeOptionIndex:o}},[2](e,o){return e.disabled===o.disabled?e:{...e,disabled:o.disabled}},[3](e,o){return e.orientation===o.orientation?e:{...e,orientation:o.orientation}},[4](e,o){var r;if(e.disabled||e.listboxState===1)return e;let t=j(e),n=we(o,{resolveItems:()=>t.options,resolveActiveIndex:()=>t.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return{...e,...t,searchQuery:"",activeOptionIndex:n,activationTrigger:(r=o.trigger)!=null?r:1}},[5]:(e,o)=>{if(e.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,t=e.searchQuery+o.value.toLowerCase(),n=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(s=>{var a;return!s.dataRef.current.disabled&&((a=s.dataRef.current.textValue)==null?void 0:a.startsWith(t))}),i=n?e.options.indexOf(n):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:t}:{...e,searchQuery:t,activeOptionIndex:i,activationTrigger:1}},[6](e){return e.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[7]:(e,o)=>{let r={id:o.id,dataRef:o.dataRef},t=j(e,n=>[...n,r]);if(e.activeOptionIndex===null){let{value:n,mode:i,compare:s}=e.propsRef.current,a=o.dataRef.current.value;D(i,{[1]:()=>n.some(u=>s(u,a)),[0]:()=>s(n,a)})&&(t.activeOptionIndex=t.options.indexOf(r))}return{...e,...t}},[8]:(e,o)=>{let r=j(e,t=>{let n=t.findIndex(i=>i.id===o.id);return n!==-1&&t.splice(n,1),t});return{...e,...r,activationTrigger:1}}},q=p.exports.createContext(null);q.displayName="ListboxContext";function N(e){let o=p.exports.useContext(q);if(o===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,N),r}return o}function Te(e,o){return D(o.type,De,e,o)}let ke=p.exports.Fragment,$e=k(function(e,o){let{value:r,name:t,onChange:n,disabled:i=!1,horizontal:s=!1,multiple:a=!1,...u}=e;const v=s?"horizontal":"vertical";let y=$(o),h=p.exports.useReducer(Te,{listboxState:1,propsRef:{current:{value:r,onChange:n,mode:a?1:0,compare:w((S,R)=>S===R)}},labelRef:p.exports.createRef(),buttonRef:p.exports.createRef(),optionsRef:p.exports.createRef(),disabled:i,orientation:v,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:b,propsRef:c,optionsRef:f,buttonRef:x},l]=h;c.current.value=r,c.current.mode=a?1:0,L(()=>{c.current.onChange=S=>D(c.current.mode,{[0](){return n(S)},[1](){let R=c.current.value.slice(),O=R.indexOf(S);return O===-1?R.push(S):R.splice(O,1),n(R)}})},[n,c]),L(()=>l({type:2,disabled:i}),[i]),L(()=>l({type:3,orientation:v}),[v]),ae([x,f],(S,R)=>{var O;l({type:1}),fe(R,be.Loose)||(S.preventDefault(),(O=x.current)==null||O.focus())},b===0);let m=p.exports.useMemo(()=>({open:b===0,disabled:i}),[b,i]),T={ref:y};return M.createElement(q.Provider,{value:h},M.createElement(se,{value:D(b,{[0]:B.Open,[1]:B.Closed})},t!=null&&r!=null&&J({[t]:r}).map(([S,R])=>M.createElement(le,{features:ue.Hidden,...ce({key:S,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:S,value:R})})),A({ourProps:T,theirProps:u,slot:m,defaultTag:ke,name:"Listbox"})))}),Ae="button",Ne=k(function(e,o){var r;let[t,n]=N("Listbox.Button"),i=$(t.buttonRef,o),s=`headlessui-listbox-button-${E()}`,a=Q(),u=w(x=>{switch(x.key){case g.Space:case g.Enter:case g.ArrowDown:x.preventDefault(),n({type:0}),a.nextFrame(()=>{t.propsRef.current.value||n({type:4,focus:I.First})});break;case g.ArrowUp:x.preventDefault(),n({type:0}),a.nextFrame(()=>{t.propsRef.current.value||n({type:4,focus:I.Last})});break}}),v=w(x=>{switch(x.key){case g.Space:x.preventDefault();break}}),y=w(x=>{if(xe(x.currentTarget))return x.preventDefault();t.listboxState===0?(n({type:1}),a.nextFrame(()=>{var l;return(l=t.buttonRef.current)==null?void 0:l.focus({preventScroll:!0})})):(x.preventDefault(),n({type:0}))}),h=_(()=>{if(t.labelRef.current)return[t.labelRef.current.id,s].join(" ")},[t.labelRef.current,s]),b=p.exports.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled}),[t]),c=e,f={ref:i,id:s,type:ye(e,t.buttonRef),"aria-haspopup":!0,"aria-controls":(r=t.optionsRef.current)==null?void 0:r.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":h,disabled:t.disabled,onKeyDown:u,onKeyUp:v,onClick:y};return A({ourProps:f,theirProps:c,slot:b,defaultTag:Ae,name:"Listbox.Button"})}),Fe="label",Ee=k(function(e,o){let[r]=N("Listbox.Label"),t=`headlessui-listbox-label-${E()}`,n=$(r.labelRef,o),i=w(()=>{var a;return(a=r.buttonRef.current)==null?void 0:a.focus({preventScroll:!0})}),s=p.exports.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled}),[r]);return A({ourProps:{ref:n,id:t,onClick:i},theirProps:e,slot:s,defaultTag:Fe,name:"Listbox.Label"})}),Ue="ul",Me=Z.RenderStrategy|Z.Static,je=k(function(e,o){var r;let[t,n]=N("Listbox.Options"),i=$(t.optionsRef,o),s=`headlessui-listbox-options-${E()}`,a=Q(),u=Q(),v=de(),y=(()=>v!==null?v===B.Open:t.listboxState===0)();p.exports.useEffect(()=>{var l;let m=t.optionsRef.current;!m||t.listboxState===0&&m!==((l=pe(m))==null?void 0:l.activeElement)&&m.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let h=w(l=>{switch(u.dispose(),l.key){case g.Space:if(t.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),n({type:5,value:l.key});case g.Enter:if(l.preventDefault(),l.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:m}=t.options[t.activeOptionIndex];t.propsRef.current.onChange(m.current.value)}t.propsRef.current.mode===0&&(n({type:1}),z().nextFrame(()=>{var m;return(m=t.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})}));break;case D(t.orientation,{vertical:g.ArrowDown,horizontal:g.ArrowRight}):return l.preventDefault(),l.stopPropagation(),n({type:4,focus:I.Next});case D(t.orientation,{vertical:g.ArrowUp,horizontal:g.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),n({type:4,focus:I.Previous});case g.Home:case g.PageUp:return l.preventDefault(),l.stopPropagation(),n({type:4,focus:I.First});case g.End:case g.PageDown:return l.preventDefault(),l.stopPropagation(),n({type:4,focus:I.Last});case g.Escape:return l.preventDefault(),l.stopPropagation(),n({type:1}),a.nextFrame(()=>{var m;return(m=t.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})});case g.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(n({type:5,value:l.key}),u.setTimeout(()=>n({type:6}),350));break}}),b=_(()=>{var l,m,T;return(T=(l=t.labelRef.current)==null?void 0:l.id)!=null?T:(m=t.buttonRef.current)==null?void 0:m.id},[t.labelRef.current,t.buttonRef.current]),c=p.exports.useMemo(()=>({open:t.listboxState===0}),[t]),f=e,x={"aria-activedescendant":t.activeOptionIndex===null||(r=t.options[t.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":t.propsRef.current.mode===1?!0:void 0,"aria-labelledby":b,"aria-orientation":t.orientation,id:s,onKeyDown:h,role:"listbox",tabIndex:0,ref:i};return A({ourProps:x,theirProps:f,slot:c,defaultTag:Ue,features:Me,visible:y,name:"Listbox.Options"})}),Be="li",Qe=k(function(e,o){let{disabled:r=!1,value:t,...n}=e,[i,s]=N("Listbox.Option"),a=`headlessui-listbox-option-${E()}`,u=i.activeOptionIndex!==null?i.options[i.activeOptionIndex].id===a:!1,{value:v,compare:y}=i.propsRef.current,h=D(i.propsRef.current.mode,{[1]:()=>v.some(O=>y(O,t)),[0]:()=>y(v,t)}),b=p.exports.useRef(null),c=$(o,b);L(()=>{if(i.listboxState!==0||!u||i.activationTrigger===0)return;let O=z();return O.requestAnimationFrame(()=>{var C,G;(G=(C=b.current)==null?void 0:C.scrollIntoView)==null||G.call(C,{block:"nearest"})}),O.dispose},[b,u,i.listboxState,i.activationTrigger,i.activeOptionIndex]);let f=p.exports.useRef({disabled:r,value:t,domRef:b});L(()=>{f.current.disabled=r},[f,r]),L(()=>{f.current.value=t},[f,t]),L(()=>{var O,C;f.current.textValue=(C=(O=b.current)==null?void 0:O.textContent)==null?void 0:C.toLowerCase()},[f,b]);let x=w(()=>i.propsRef.current.onChange(t));L(()=>(s({type:7,id:a,dataRef:f}),()=>s({type:8,id:a})),[f,a]);let l=w(O=>{if(r)return O.preventDefault();x(),i.propsRef.current.mode===0&&(s({type:1}),z().nextFrame(()=>{var C;return(C=i.buttonRef.current)==null?void 0:C.focus({preventScroll:!0})}))}),m=w(()=>{if(r)return s({type:4,focus:I.Nothing});s({type:4,focus:I.Specific,id:a})}),T=w(()=>{r||u||s({type:4,focus:I.Specific,id:a,trigger:0})}),S=w(()=>{r||!u||s({type:4,focus:I.Nothing})}),R=p.exports.useMemo(()=>({active:u,selected:h,disabled:r}),[u,h,r]);return A({ourProps:{id:a,ref:c,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":h===!0?!0:void 0,disabled:void 0,onClick:l,onFocus:m,onPointerMove:T,onMouseMove:T,onPointerLeave:S,onMouseLeave:S},theirProps:n,slot:R,defaultTag:Be,name:"Listbox.Option"})}),F=Object.assign($e,{Button:Ne,Label:Ee,Options:je,Option:Qe});function xt(){var h,b;const{pathname:e,search:o}=re(),[r,t]=p.exports.useState(new URLSearchParams(o)),{options:n,setSelectedOption:i,selectedOptions:s,selectedVariant:a}=U(),u=!(a!=null&&a.availableForSale)||!1,v=((h=a==null?void 0:a.priceV2)==null?void 0:h.amount)<((b=a==null?void 0:a.compareAtPriceV2)==null?void 0:b.amount)||!1;p.exports.useEffect(()=>{r||!o||t(new URLSearchParams(o))},[r,o]),p.exports.useEffect(()=>{n.map(({name:c,values:f})=>{if(!r)return;const x=r.get(c.toLowerCase())||null;if(x){const l=f.filter(m=>encodeURIComponent(m.toLowerCase())===x);i(c,l[0])}else r.set(encodeURIComponent(c.toLowerCase()),encodeURIComponent(s[c].toLowerCase())),window.history.replaceState(null,"",`${e}?${r.toString()}`)})},[]);const y=p.exports.useCallback((c,f)=>{i(c,f),r&&(r.set(encodeURIComponent(c.toLowerCase()),encodeURIComponent(f.toLowerCase())),Oe()&&window.history.replaceState(null,"",`${e}?${r.toString()}`))},[i,r,e]);return P("form",{className:"grid gap-10",children:[d("div",{className:"grid gap-4",children:n.map(({name:c,values:f})=>f.length===1?null:P("div",{className:"flex flex-col flex-wrap mb-4 gap-y-2 last:mb-0",children:[d(ve,{as:"legend",size:"lead",className:"min-w-[4rem]",children:c}),d("div",{className:"flex flex-wrap items-baseline gap-4",children:d(ze,{name:c,handleChange:y,values:f})})]},c))}),P("div",{className:"grid items-stretch gap-4",children:[d(Se,{variantId:a==null?void 0:a.id,quantity:1,accessibleAddingToCartLabel:"Adding item to your cart",disabled:u,children:d(ne,{width:"full",variant:u?"secondary":"primary",as:"span",children:u?d(H,{children:"Sold out"}):P(H,{as:"span",className:"flex items-center justify-center gap-2",children:[d("span",{children:"Add to bag"})," ",d("span",{children:"\xB7"})," ",d(W,{withoutTrailingZeros:!0,data:a.priceV2,as:"span"}),v&&d(W,{withoutTrailingZeros:!0,data:a.compareAtPriceV2,as:"span",className:"opacity-50 strike"})]})})}),!u&&d(ee,{variantIds:[a.id]})]})]})}function ze({values:e,...o}){return e.length>7?d(Ke,{values:e,...o}):d(He,{values:e,...o})}function He({values:e,name:o,handleChange:r}){const{selectedOptions:t}=U();return d(K,{children:e.map(n=>{const i=t[o]===n,s=`option-${o}-${n}`;return P(H,{as:"label",htmlFor:s,children:[d("input",{className:"sr-only",type:"radio",id:s,name:`option[${o}]`,value:n,checked:i,onChange:()=>r(o,n)}),d("div",{className:`leading-none py-1 border-b-[1.5px] cursor-pointer transition-all duration-200 ${i?"border-primary/50":"border-primary/0"}`,children:n})]},s)})})}function Ke({values:e,name:o,handleChange:r}){const[t,n]=p.exports.useState(!1),{selectedOptions:i}=U(),s=p.exports.useCallback(a=>{r(o,a)},[o,r]);return d("div",{className:"relative w-full",children:d(F,{onChange:s,value:"",children:({open:a})=>(setTimeout(()=>n(a)),P(K,{children:[P(F.Button,{className:`flex items-center justify-between w-full py-3 px-4 border border-primary ${a?"rounded-b md:rounded-t md:rounded-b-none":"rounded"}`,children:[d("span",{children:i[o]}),d(he,{direction:a?"up":"down"})]}),d(F.Options,{className:`border-primary bg-contrast absolute bottom-12 z-30 grid
                h-48 w-full overflow-y-scroll rounded-t border px-2 py-2 transition-[max-height]
                duration-150 sm:bottom-auto md:rounded-b md:rounded-t-none md:border-t-0 md:border-b ${t?"max-h-48":"max-h-0"}`,children:e.map(u=>{const v=i[o]===u,y=`option-${o}-${u}`;return d(F.Option,{value:u,children:({active:h})=>P("div",{className:`text-primary w-full p-2 transition rounded flex justify-start items-center text-left cursor-pointer ${h?"bg-primary/10":null}`,children:[u,v?d("span",{className:"ml-2",children:d(ge,{})}):null]})},y)})})]}))})})}export{xt as ProductForm};
//# sourceMappingURL=5cfb78ef.js.map
