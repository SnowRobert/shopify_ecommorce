import{R as v,r as i,d as N,F as O,j as d,e as W}from"./index.c153b984.js";import{u as x,c as f,a as A}from"./2a144923.js";import{u as U,b as J}from"./2adb707e.js";import{useBasePath as $}from"./bcfb1ab5.js";import"./c5a2d9c6.js";const H=v.forwardRef(function(t,o){var T,g;const n=U(),c=x(),[P,u]=v.useTransition(),E=$(),[C,R]=i.exports.useState(!1),[S,p]=i.exports.useState(!1),{reloadDocument:b,target:l,replace:k,onClick:h,clientState:y,prefetch:L=!0,scroll:M=!0}=t,r=J((T=t.basePath)!=null?T:E,t.to),B=i.exports.useCallback(s=>{if(h&&h(s),!b&&s.button===0&&(!l||l==="_self")&&!z(s)){s.preventDefault();const D=!!k||f(c)===f({pathname:r});n(r,{replace:D,scroll:M,clientState:y,basePath:"/"})}},[h,b,l,k,c,r,n,y,M]),m=()=>{u(()=>{L&&!!r&&p(!0)})},w=()=>{u(()=>{L&&p(!1)})};i.exports.useEffect(()=>{if(S){const s=setTimeout(()=>{R(!0)},100);return()=>{clearTimeout(s)}}},[S]);const F=a(t.onMouseEnter,m),j=a(t.onMouseLeave,w),I=a(t.onFocus,m),K=a(t.onBlur,w),_=a(t.onTouchStart,m);return N(O,{children:[d("a",{...G(t,["to","replace","clientState","reloadDocument","prefetch","scroll"]),ref:o,rel:(g=t.rel)!=null?g:r.startsWith("http")||r.startsWith("//")?"noreferrer noopener":void 0,onClick:B,onMouseEnter:F,onMouseLeave:j,onFocus:I,onBlur:K,onTouchStart:_,href:r,children:t.children}),C&&d(q,{pathname:r})]})});function q({pathname:e}){const{getProposedLocationServerProps:t}=A(),o=x(),n=f({pathname:e});if(e.startsWith("http")||n===f(o))return null;const c=new URL(n,window.location.href),P=t({pathname:c.pathname,search:c.search}),u=`${W}?state=`+encodeURIComponent(JSON.stringify(P));return d("link",{rel:"prefetch",as:"fetch",href:u})}function a(e,t){return o=>{e==null||e(o),o.defaultPrevented||t(o)}}function z(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function G(e,t){const o={};for(const n of Object.keys(e))t.includes(n)||(o[n]=e[n]);return o}export{H as Link,a as composeEventHandlers};
//# sourceMappingURL=7c2d04db.js.map
